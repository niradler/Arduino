//this code will work with most samsung tv remote, for other remote 
// control use serial monitor the message will be "IR code is unknown: IR_CODE"
//save the code on the computer and chnage the IRcode in the array.
//develop by Nir Adler at 7.2.2014
//https://github.com/niradler/Arduino.git for updates
#include <IRremote.h>

int RECV_PIN = 4;
int led =3;

long int power[] = {-456322552, -902702523, -189126264 };           
long int up[] = {-800261024, -1033113532 };                 
long int down[] = {1641747682,  -989874618};               
long int right[] = {1400905448, 116954692 };  
long int left[] = { 1972149634, 1463913437 };  
long int enter[] = { 541477668, -1963903704 };  
IRrecv irrecv(RECV_PIN);

decode_results results;

void setup()
{
  Serial.begin(9600);
  Keyboard.begin();
  irrecv.enableIRIn(); // Start the receiver
  pinMode(led, OUTPUT);      // sets the digital pin as output

}

void loop() {
  if (irrecv.decode(&results)) {
    
    long int decCode = results.value;
      if(scanIR(decCode) ==false) {
        Serial.print("IR code is unknown: ");
          Serial.println(decCode);
      }

    irrecv.resume(); // Receive the next value
  }
}

boolean scanIR (long int ircode) {
  for(int i=0; i < 2;i++) {
    if(up[i] == ircode) {
       Serial.print("u:");
      Serial.println(ircode);
      Keyboard.press(KEY_UP_ARROW);
      delay(50);
      Keyboard.releaseAll();
      return true;
    }
  }
  
  for(int i=0; i < 2;i++) {
    if(down[i] == ircode) {
       Serial.print("d:");
      Serial.println(ircode);
      Keyboard.press(KEY_DOWN_ARROW);
      delay(50);
      Keyboard.releaseAll();
      return true;
     
    }
  }
  
  for(int i=0; i < 2;i++) {
    if(right[i] == ircode) {
        Serial.print("r:");
      Serial.println(ircode);
      Keyboard.press(KEY_RIGHT_ARROW);
      delay(50);
      Keyboard.releaseAll();
      return true;
    
    }
  }
  
  for(int i=0; i<2;i++) {
    if(left[i] == ircode) {
      Serial.print("l:");
      Serial.println(ircode);
      Keyboard.press(KEY_LEFT_ARROW);
      delay(50);
      Keyboard.releaseAll();
      return true;
    }
  }
  
  for(int i=0; i<2;i++) {
    if(enter[i] == ircode) {
       Serial.print("e:");
      Serial.println(ircode);
      Keyboard.press(KEY_RETURN);
      delay(50);
      Keyboard.releaseAll();
      return true;
    }
  }
  
  for(int i=0; i < 3; i++) {
    if(power[i] == ircode) {
       Serial.print("p:");
      Serial.println(ircode);
      Keyboard.press(KEY_BACKSPACE);
      delay(50);
      Keyboard.releaseAll();
      return true;
    }
  }
  
  return false;
}
